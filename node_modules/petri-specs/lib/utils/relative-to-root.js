'use strict';

const fs = require('fs');
const path = require('path');
const join = parts => path.join.apply(path, parts);
const resolve = parts => path.resolve(join(parts));

let prev;
const parts = ['package.json'];
while (!fs.existsSync(join(parts))) {
  prev = resolve(parts);
  parts.unshift('..');
  if (prev === resolve(parts)) {
    throw 'You can only run this command inside a node project!';
  }
}
parts.pop();

module.exports = filename => join(parts.concat([filename]));
