#  Changes to petri spec definitions

Due to changes in how experiments are being conducted, we need to deprecate some of the spec’s fields:
1. `testGroups` will be deprecated in favor of `controlGroup` and `variants`.
2. `scope` will be deprecated in favor of `scopes`.

## Example for an updated spec:
```
{
  "specs.infra.SomeExperiment": {
    "owner": "fed-infra@wix.com",
    "onlyForLoggedInUsers": false,
    "scopes": [
      "account-recovery"
    ],
    "controlGroup": "false",
    "variants": [
      "true"
    ]
  }
}
```

* Please note that the controlGroup should be the ‘current’/‘old’/‘fallback’ value and it’s important to define the correct one.

## How to update the specs manually:
Take this opportunity and upgrade `petri-specs` cli tool, so it will generate the updated json file structure:
```
npm install -g petri-specs
```

Then run `petri-specs build` to convert the json files.

## How to automatically update the specs if you are using yoshi:
run `npm run build && npm test` and yoshi will take care of the rest. You will be able to see the updated specs locally with `git status`, so make sure they are ok and push them.

## How to automatically update the specs if you are using old stack:
run `grunt build`. You will be able to see the updated specs locally with `git status`, so make sure they are ok and push them.


## Deprecation Date:

**Deprecated specs will start to break your projects from 01/11/17, so please make sure to update them before it happens.**


If you're not sure about anything, feel free to ask about it in [#petri-discussions](https://wix.slack.com/messages/C0W6260BW) slack channel.
