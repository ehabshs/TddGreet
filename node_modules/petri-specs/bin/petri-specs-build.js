'use strict';

const program = require('commander');
const relativeToRoot = require('../lib/utils/relative-to-root');

function list(val) {
  return val.split(',');
}

function toBoolean(val) {
  return val === 'true';
}

program
  .version(require('../package').version)
  .option('--directory <path>', 'specs directory', relativeToRoot('petri-specs'))
  .option(
    '--json <file-path>',
    'output file for specs feeder',
    relativeToRoot('dist/petri-experiments.json')
  )
  .option('--ts <file-path>', 'typescript definitions', '')
  .option('--js <file-path>', 'javascript definitions', '')
  .option('--pom <path>', 'pom file of artifact', relativeToRoot('pom.xml'))
  .option('--only-for-logged-in-users [isOnlyForLoggedInUsers]', 'will the translations specs be created only for logged in users', toBoolean, true)
  .option('--scopes <scopes>', 'comma separated scopes for the translation specs', list)
  .parse(process.argv);

require('../lib/petri-specs').convert(program);
require('../lib/petri-specs').migrate(program);
require('../lib/petri-specs').build(program);
